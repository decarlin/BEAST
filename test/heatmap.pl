#!/usr/bin/perl

use lib "/projects/sysbio/map/Projects/BEAST/perllib";

use BEAST::Constants;

my $json = <<EOF;
[{"_metadata":{"type":"info","action":"base64gif","filename":"heatmap.txt","width":"400","height":"400"}}]
[{"_metadata":{"name":"kinesin-associated mitochondrial adaptor activity","id":"154128","type":"set"},"_name":"human:GO:0019895","_delim":"^","_active":1,"_elements":{"TRAK1":""}}]
[{"_metadata":{"name":"mitochondrial proton-transporting ATP synthase complex, catalytic core F(1)","id":"142716","type":"set"},"_name":"human:GO:0000275","_delim":"^","_active":1,"_elements":{"ATP5E":"","ATP5C1":"","ATP5B":"","ATP5D":""}}]
EOF

my $json2 = <<EOF;
[{"_metadata":{"type":"info","action":"base64gif","filename":"heatmap.txt","width":"750","height":"580"}}]
[{"_metadata":{"meta1":"val3","type":"set","id":"local:set3","meta2":"val2"},"_name":"set3","_delim":"^","_active":1,"_elements":{"gene7":"","gene2":"","gene4":""}}]
[{"_metadata":{"name":"YPR141C","type":"set","id":"178900"},"_name":"YPR141C","_delim":"^","_active":1,"_elements":{"YER032W":"-0.0448763883912576","YOR182C":"-0.0506091006807596","YDR123C":"-0.13301683984235","YCL016C":"-0.148423504120387","YCR088W":"0.0600283395594487","YBR076W":"-0.0565209602293085","YJL176C":"0.181888445188716","YJR003C":"-0.0429057685417413","YGR174C":"0.0977714800979003","YCR086W":"-0.1461841633823","YFR003C_DAMP":"-0.120297384450018","YBR079C_DAMP":"0.113744686332603","YAL056W":"-0.0955750627015407","YOR003W":"-0.039412396990326","YKR062W_TSQ692":"0.112842973077419","YDR318W":"-0.192941597993551","YBL058W":"-0.343962737370118","YDR477W":"0.150457297436558","YDR388W_DAMP":"0.0535875305938426","YBR211C_TSQ716":"-0.141168040128986","YLR048W":"-0.0938731637405948","YBL050W_TSQ48":"0.211644982609816","YDR507C":"0.102408862553137","YDR002W_TSQ582":"0.111812443642922","YCR065W":"-0.218828376925833","YDR113C_TSQ862":"-0.345575062701541","YDL134C":"-0.107936223575779","YLR299W":"-0.0588498745969187","YHL040C":"-0.0374417771408097","YGL211W":"0.185108849671519","YGL061C_TSQ239":"-0.327929057685417","YOR195W":"-0.529111429595127","YOR216C":"0.0770320752286487","YHR215W":"-0.0504299534217127","YDR518W":"-0.224202794697241","YHR166C_TSQ89":"-0.35408455750627","YIR041W":"0.0446992142213062","YGL009C":"0.0798660311735154","YIL008W":"0.163081283009146","YOL068C":"-0.0426370476531709","YDR279W":"0.062475846966379","YIR030C":"0.0589978101249517","YDR014W":"-0.356771766391974","YPL241C":"0.127141568981064","YJL154C":"0.128944995491434","YDL107W":"-0.0331422429236833","YEL061C":"-0.134718738803296","YJL074C_TSQ259":"-0.283858831959871","YDL102W_TSQ135":"0.146979260595131","YDR074W":"-0.104980293801505","YOL151W":"-0.0252597635256181","YNL223W":"0.0637640087595002","YMR068W":"0.127785649877625","YDR358W":"-0.188104621999283","YER095W":"-0.131225367251881","YBR263W":"-0.057954138301684","YOR144C":"-0.0712110354711573","YOR116C_TSQ831":"0.187685173257761","YCR066W":"-0.303923324973128","YNL253W":"-0.0437119312074525","YLR373C":"-0.0913651021139376","YER089C":"-0.242923683267646","YDR243C_TSQ574":"0.131392502898364","YBR257W_DAMP":"-0.084736653529201","YMR154C":"0.032848125724591","YLR410W":"-0.308043711931207","YEL003W":"-0.160426370476532","YLL038C":"0.0950663403323457","YPL171C":"-0.0504299534217127","YOR259C_TSQ260":"-0.156037262629882","YGL167C":"-0.245790039412397","YOL054W":"-0.209333572196345","YDL145C_TSQ704":"0.0933917300012882","YOR103C_DAMP":"0.131006054360428","YGL127C":"0.18214607754734","YOL004W":"0.171711967023058","YDL135C":"-0.214080974561089","YER177W":"-0.270243640272304","YJL002C_TSQ735":"0.0799948473528275","YGR178C":"-0.0563418129702615","YMR294W":"-0.286008599068434","YHR083W_TSQ493":"-0.250358294518094","YLR216C":"-0.277051236116087","YBR131W":"-0.0824077391615908","YOR058C":"-0.235578645646722","YML071C":"0.238696380265361","YDR004W":"-0.0427266212826944","YLR015W":"0.085791575421873","YKL203C_TSQ838":"-0.0533858831959871","YLR170C":"-0.116535292010032","YGL173C":"-0.176728771049803","YBR082C":"-0.319240415621641","YFL001W":"0.0841169650908154","YKL056C":"0.0888831637253639","YHR191C":"-0.273557864564672","YEL020C":"-0.152006449301326","YOL089C":"0.112070076001546","YPL038W":"-0.0251701898960946","YDL102W_TSQ17":"-0.118416338230025","YOL006C":"0.151874275408991","YHL044W":"-0.0283948405589394","YNL330C":"0.129717892567306","YBL035C_TSQ365":"-0.0615370834826227","YLR272C_TSQ432":"-0.215782873522035","YDR363W-A":"-0.338677893228234","YLL002W":"-0.145736295234683","YOR311C":"-0.127015406664278","YGL194C":"-0.172877104980294","YKL203C_DAMP":"0.083730516552879","YNL292W":"-0.062164098889287","YOR106W":"0.0826999871183821","YMR223W":"0.0971273992013397","YML125C_DAMP":"-0.0487280544607667","YJR053W":"-0.0754209960587603","YLR287C-A":"-0.0444285202436403","YIL040W":"-0.110265137943389","YMR232W":"-0.0922608384091723","YGL095C":"0.0883678990081154","YFR004W_TSQ534":"-0.109100680759584","YGL163C":"-0.0518631314940881","YBL047C":"0.107303877366997","YDR488C":"-0.387316374059477","YCR033W":"-0.356234324614833","YGR245C_TSQ523":"-0.0585811537083483","YBR055C_TSQ455":"0.162179569753961","YMR227C_TSQ638":"-0.0457721246864923","YNR072W":"-0.0558939448226442","YGL003C":"-0.262002866356145","YDR293C":"-0.3362594052311","YDL003W_TSQ62":"-0.306879254747402","YLR424W_DAMP":"0.0552621409249002","YOR329C_DAMP":"-0.0556252239340738","YJL128C":"-0.213095664636331","YJL166W_DAMP":"0.0412211773798789","YDR448W":"0.137962128043282","YGR185C_TSQ290":"-0.0912755284844142","YER120W":"-0.144840558939448","YDR200C":"0.121344840912019","YFL008W_TSQ71":"-0.332855607309208","YOR039W":"0.0512688393662244","YHR041C":"0.189617415947443","YKR010C":"-0.080347545682551","YGL168W":"-0.232264421354353","YMR219W":"-0.0425474740236474","YPL140C":"-0.0536546040845575","YOR026W":"-0.321479756359728","YDR105C":"-0.0601934790397707","YJL124C":"-0.271766391974203","YIR010W_TSQ435":"-0.369759942672877","YDR392W":"0.124951693932758","YLR332W":"-0.101845216768183","YDR254W":"-0.32774991042637","YLL003W_TSQ475":"-0.286366893586528","YKR054C":"-0.13713722680043","YPL233W_TSQ450":"-0.0594768900035829","YGL105W":"0.0557774056421486","YHR064C":"-0.0419204586169832","YLL049W":"-0.253582945180939","YIR027C":"0.102280046373825","YGL066W":"0.185366482030143","YKL055C":"0.0841169650908154","YFR036W_TSQ91":"0.12082957619477","YPL231W_DAMP":"-0.0245431744894303","YDR162C":"0.121087208553394","YOR030W":"0.122504186525828","YMR138W":"0.0668555970629911","YBR078W":"-0.108563238982444","YBR198C_TSQ512":"0.0727811413113487","YFR049W":"-0.129613041920459","YHR012W":"0.160118510884967","YBR060C_TSQ311":"-0.263077749910426","YBR152W_DAMP":"-0.0413830168398423","YOR066W":"-0.121730562522393","YML094W":"-0.350322465066284","YKR046C":"-0.0463095664636331","YNL222W_TSQ905":"0.284941388638413","YBL061C":"0.141568981064022","YHR088W_DAMP":"0.0816694576838851","YNL118C_TSQ743":"-0.18828376925833","YMR263W":"0.34303748550818","YIL033C":"-0.152991759226084","YPR141C":"-0.0580437119312074","YLR200W":"-0.355338588319599","YBR165W":"-0.0670010748835543","YLR384C":"0.243591395079222","YNL273W":"-0.347724829810104","YFR002W_DAMP":"-0.129792189179506","YDR168W_TSQ315":"-0.135166606950914","YER155C":"-0.187835901110713","YOR383C":"0.067757310318176","YGR142W":"-0.025438910784665","YLL043W":"-0.109011107130061","YHR111W":"0.0972562153806518","YJL166W":"-0.0463991400931566","YHR013C":"-0.0800788247939806","YDR510W_DAMP":"-0.0428161949122178","YPL253C":"0.0864356563184336","YNL257C":"-0.0444285202436403","YKL080W":"0.114646399587788","YBL089W":"-0.0421891795055536","YPL158C":"-0.130867072733787","YLR045C_TSQ550":"-0.280275886778932","YGL112C_TSQ608":"0.193739533685431","YGR072W":"-0.0926191329272662","YBL034C_TSQ822":"-0.438194195628807","YMR299C":"-0.238713722680043","YER157W_TSQ44":"0.266134226458843","YMR236W_TSQ730":"0.173257761174804","YOL135C_TSQ739":"0.141182532526085","YOR269W":"-0.217574346112504","YGL224C":"-0.0335005374417771","YDR072C":"-0.049355069867431","YDR439W":"-0.228860623432461","YDL117W":"-0.192135435327839","YCL029C":"0.16758984928507","YFL031W":"-0.0935148692225009","YOR275C":"0.133195929408734","YDL017W_TSQ131":"-0.128986026513794","YGL097W_TSQ958":"0.0986731933530852","YPL174C":"-0.246506628448585","YKR060W":"0.0304006183176607","YFR052W_TSQ405":"-0.138032963095665","YMR312W":"0.156254025505604","YDR088C_TSQ656":"0.205719438361458","YLR438C-A_DAMP":"-0.246058760300967","YJL030W":"-0.314761734145468","YHR135C":"0.0714929795182275","YFL008W_TSQ321":"-0.326495879613042","YKR077W":"-0.0801683984235041","YHR077C":"-0.0990684342529559","YMR307W":"0.100090171325518","YGR200C":"0.155738760788355","YGR285C":"-0.103099247581512","YDR180W_TSQ69":"-0.432103188821211","YOL152W":"0.00966121344840912","YER107C":"-0.135435327839484","YML124C":"0.0828288032976942","YKR075C":"-0.153439627373701","YGL045W":"0.0909442225943578","YDL088C":"-0.0996954496596202","YDR435C":"-0.319061268362594","YHR200W":"-0.213364385524901","YOL041C":"0.0188071621795698","YOR077W_DAMP":"-0.0850053744177714","YGL148W":"0.103052943449697","YJL052W":"0.0635063764008759","YBL034C_TSQ274":"-0.413024005732712","YGR270W":"-0.0619849516302401","YGR027C":"-0.213364385524901","YMR056C":"0.037099059641891","YCR016W":"0.0310446992142213","YIL150C_TSQ110":"-0.0557147975635973","YDL007W_DAMP":"-0.291024722321748","YAR002W":"-0.042278753135077","YGL253W":"0.147623341491691","YLR421C":"-0.19679326406306","YHR188C_DAMP":"-0.283858831959871","YOR014W":"-0.262898602651379","YDR043C":"-0.154424937298459","YGL130W_TSQ355":"0.0838593327321912","YIL006W":"-0.0576854174131136","YHR007C_TSQ14":"0.08682210485637","YHR028C":"0.0757439134355275","YJL101C":"0.0650521705526214","YGL001C_TSQ742":"0.0535875305938426","YMR078C":"-0.312343246148334","YDL103C_TSQ859":"0.131650135256988","YDR316W":"0.0915883034909185","YJL098W":"-0.0634181297026156","YBR080C_TSQ57":"0.10807677444287","YDR013W_TSQ583":"0.0774185237665851","YLR397C_DAMP":"0.0856627592425609","YEL036C":"-0.33831959871014","YMR095C":"-0.152096022930849","YLR210W":"-0.196703690433536","YDR330W":"-0.0154066642780365","YMR028W_TSQ697":"-0.379613041920459","YDR150W":"-0.182998925116446","YCR077C":"-0.400841992117521","YDR315C":"-0.236116087423862","YDL020C":"-0.137764242207094","YER145C":"0.0610588689939456","YDR174W":"-0.072106771766392","YKL203C_TSQ398":"-0.0766750268720889","YDR379W":"-0.0707631673235399","YGR088W":"-0.0561626657112146","YKR092C":"0.106530980291125","YBL084C_TSQ92":"-0.0482801863131494","YGL086W":"-0.426101755643139","YGL233W_TSQ43":"0.129202627850058","YBR087W_TSQ887":"-0.318971694733071","YKL103C":"-0.0302758867789323","YJL205C":"-0.138570404872805","YBR200W":"-0.104980293801505","YHR046C":"0.0769032590493366","YGL116W_TSQ368":"-0.370386958079541","YLR089C":"0.0775473399458972","YGR274C_TSQ524":"0.0588689939456396","YHR031C":"0.0955816050495942","YPL226W":"0.150843745974494","YJR118C":"-0.204227875313508","YDL077C":"0.117351539353343","YKR104W":"-0.0332318165532067","YGR006W_TSQ434":"0.106015715573876","YOR068C":"-0.0707631673235399","YPL235W_DAMP":"0.0721370604147881","YLR002C_DAMP":"0.0873373695736184","YML034W":"-0.121103547115729","YJR049C":"0.124565245394822","YHR087W":"-0.0447868147617341","YDR151C":"-0.0363668935865281","YKL057C":"0.153548885740049","YLR452C":"-0.0502508061626657","YOL115W":"0.0483060672420456","YOR265W":"0.0960968697668427","YIL023C":"-0.0654783231816553","YJR134C":"0.0534587144145305","YOR335C_TSQ908":"-0.19500179147259","YOR038C":"0.090042509339173","YER013W_TSQ237":"0.175705268581734","YBL102W":"-0.0449659620207811","YGL005C":"0.0979002962772124","YMR190C":"0.0824423547597578","YDR191W":"0.105886899394564","YOL108C":"-0.0486384808312433","YGR135W":"-0.172966678609817","YGR184C":"-0.252955929774274","YDR207C":"-0.120476531709065","YGR120C_TSQ187":"0.115290480484349","YER083C":"0.303619734638671","YOR250C_DAMP":"0.172098415560994","YOR360C":"-0.2148871372268","YDR156W":"-0.0687029738445002","YGR113W_TSQ243":"-0.290576854174131","YNL302C":"-0.0523109996417055","YDR512C":"-0.0517735578645647","YNR052C_DAMP":"-0.178609817269796","YPL204W_DAMP":"-0.183715514152633","YKL093W":"-0.220888570404873","YDL005C":"-0.0623432461483339","YKL002W":"0.0678861264974881","YDR219C":"-0.0374417771408097","YGR157W":"-0.0696882837692583","YFL009W_TSQ415":"-0.252955929774274","YLR459W_TSQ200":"0.120443127656834","YCR104W":"-0.0558043711931207","YLR103C_TSQ694":"-0.0548190612683626","YJR045C_TSQ328":"-0.0725546399140093","YPL130W":"-0.165890361877463","YOR070C":"0.114646399587788","YOR040W":"0.0829576194770063","YFL009W_TSQ334":"-0.30965603726263","YNL291C":"-0.0405768541741311","YLR079W":"-0.0420996058760301","YOR348C":"-0.053565030455034","YLR059C":"-0.142332497312791","YGR213C":"-0.00958437835901111","YOR361C_TSQ30":"-0.0919025438910785","YJL013C":"-0.373074166965245","YNL136W":"-0.32076316732354","YDL115C":"-0.249283410963812","YDR091C_DAMP":"0.127270385160376","YBR109C_TSQ157":"0.126239855725879","YDR212W_TSQ448":"0.106402164111812","YER112W_DAMP":"-0.363668935865281","YIL090W":"-0.0764958796130419","YOL081W":"-0.298369759942673","YBL087C":"0.0775473399458972","YBL079W":"-0.0555356503045503","YER133W_DAMP":"-0.246327481189538","YMR048W":"-0.276245073450376","YOL067C":"0.0641504572974366","YKR095W":"-0.0984414188462917","YLL058W":"-0.0780186313149409","YKL068W":"0.0787066855597063","YOL011W":"-0.0652991759226084","YJL168C":"0.112842973077419","YGR119C_TSQ957":"-0.120566105338588","YHR187W":"0.0977714800979003","YGR155W":"-0.0232891436761018","YPL181W":"0.327193095452789","YDR197W":"-0.0614475098530992","YLR032W":"-0.0270512361160874","YDR466W":"-0.0694195628806879","YBR160W_TSQ175":"-0.199032604801147","YMR198W":"0.363519258018807","YMR159C":"0.107819142084246","YOR211C":"-0.222142601218201","YLR260W":"-0.0622536725188105","YNR039C":"-0.0709423145825869","YLR320W":"-0.0775707631673235","YGR118W":"-0.0446972411322107","YGL020C":"0.22220790931341","YHR129C":"-0.243640272303834","YDR369C":"-0.115281261196704","YNL216W_DAMP":"-0.093335721963454","YDL028C_TSQ169":"-0.409441060551774","YNL309W":"-0.0730920816911501"}}]
EOF

my $command = Constants::JAVA_64_BIN." -jar ".Constants::HEATMAP_JAR." 1 >> /tmp/beast_heatmap_errfile.txt 2>&1";
open COMMAND, "|-", "$command";
print COMMAND $json2;
close COMMAND;
